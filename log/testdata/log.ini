# log configuration #

### log async ###
# > 0 : do asynchronize wrap 
# < 0 : do synchronize wrap
# = 0 : do nothing (default)
async = 1000

### log format ###
#format=json:{"level":%l, "file":%S, "func":%F, "msg": %m}%n
format=text:%l %S %F() - %m%n%T

### log writer ###
writer = stdout, stderr, tcp, dailyfile, slack, smtp, teams, http, httpbatch

### log level ###
[level]
* = info
sql = debug
http = trace

### stdout writer ###
[writer.stdout]
format = %l - %m%n%T
filter = name:out level:trace

### tcp writer ###
[writer.tcp]
_async = 1000
addr = localhost:9999
timeout = 5s
format = %l - %m%n%T
filter = level:debug

### file writer ###
[writer.dailyfile]
_ = file
_async = 1000
path = /tmp/gotest/logs/test.log
dirPerm = 0777
maxDays = 7
maxSize = 4 MB
syncLevel = error
format = %l %S:%L %F() - %m%n%T
filter = level:info

### slack writer ###
[writer.slack]
_async = 1000
webhook = https://hooks.slack.com/services/...
timeout = 5s
subject = %l - %m 
format = %l - %m%n%T
filter = level:warn

### smtp writer ###
[writer.smtp]
_async = 1000
_failover = 5
host = localhost
port = 25
username = -----
password = xxxxxxx
from = pango@google.com
to = to1@test.com, to2@test.com
cc = cc1@test.com, cc2@test.com
timeout = 5s
subject = %l - %m 
format = %l - %m%n%T
filter = level:error

### teams writer ###
[writer.teams]
_async = 1000
webhook = https://xxx.webhook.office.com/webhookb2/...
timeout = 3s
subject = %l - %m 
format = %l - %m%n%T
filter = level:fatal

### http writer ###
[writer.http]
_failover = 10
url = http://localhost:9200/pango_logs/_doc
contentType = application/json
timeout = 5s
format = json:{"time":%t{2006-01-02T15:04:05.000Z07:00}, "level":%l, "file":%S, "line":%L, "func":%F, "msg": %m, "stack": %T}%n
filter = level:fatal

### http batch writer ###
[writer.httpbatch]
_ = http
_async = 1000
url = http://localhost:9200/pango_logs/_bulk
contentType = application/json
timeout = 5s
format = json:{"time":%t{2006-01-02T15:04:05.000Z07:00}, "level":%l, "file":%S, "line":%L, "func":%F, "msg": %m, "stack": %T}%n
filter = level:debug
batchCount = 5
cacheCount = 10
flushLevel = error
flushDelta = 60s
