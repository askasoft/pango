package num

import (
	"math"
	"testing"
)

func TestComma(t *testing.T) {
	cs := []struct {
		w string
		s any
	}{
		{"0", 0},
		{"10", 10},
		{"100", 100},
		{"1,000", 1000},
		{"10,000", 10000},
		{"100,000", 100000},
		{"10,000,000", 10000000},
		{"10,100,000", 10100000},
		{"10,010,000", 10010000},
		{"10,001,000", 10001000},
		{"123,456,789", 123456789},
		{"9,223,372,000,000,000,000", 9.223372e+18},
		{"9,223,372,036,854,775,807", math.MaxInt64},
		{"-9,223,372,036,854,775,808", math.MinInt64},
		{"-9,223,372,000,000,000,000", -9.223372e+18},
		{"-123,456,789", -123456789},
		{"-10,100,000", -10100000},
		{"-10,010,000", -10010000},
		{"-10,001,000", -10001000},
		{"-10,000,000", -10000000},
		{"-100,000", -100000},
		{"-10,000", -10000},
		{"-1,000", -1000},
		{"-100", -100},
		{"-10", -10},
	}

	for i, c := range cs {
		a := Comma(c.s)
		if a != c.w {
			t.Errorf("[%d] Comma(%v) = %v, want %v", i, c.s, a, c.w)
		}
	}
}

func TestCommaFloatWithDigits(t *testing.T) {
	cs := []struct {
		w string
		n float64
		d int
	}{
		{"1", 1.23, 0},
		{"1.2", 1.23, 1},
		{"1.23", 1.23, 2},
		{"1.23", 1.23, 3},
		{"1.234", 1.234, 3},
		{"1.235", 1.2346, 3},
	}

	for i, c := range cs {
		a := CommaFloatWithDigits(c.n, c.d)
		if a != c.w {
			t.Errorf("[%d] CommaFloatWithDigits(%f, %d) = %v, want %v", i, c.n, c.d, a, c.w)
		}
	}
}

func TestCommaFloat(t *testing.T) {
	cs := []struct {
		w string
		n float64
	}{
		{"0", 0},
		{"10.11", 10.11},
		{"100", 100},
		{"1,000", 1000},
		{"10,000", 10000},
		{"100,000", 100000},
		{"834,142.32", 834142.32},
		{"10,000,000", 10000000},
		{"10,100,000", 10100000},
		{"10,010,000", 10010000},
		{"10,001,000", 10001000},
		{"123,456,789", 123456789},
		{"179,769,313,486,231,570,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000", math.MaxFloat64},
		{"0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005", math.SmallestNonzeroFloat64},
		{"-123,456,789", -123456789},
		{"-10,100,000", -10100000},
		{"-10,010,000", -10010000},
		{"-10,001,000", -10001000},
		{"-10,000,000", -10000000},
		{"-100,000", -100000},
		{"-10,000", -10000},
		{"-1,000", -1000},
		{"-100.11", -100.11},
		{"-10", -10},
	}

	for i, c := range cs {
		a := CommaFloat(c.n)
		if a != c.w {
			t.Errorf("[%d] CommaFloat(%v) = %v, want %v", i, c.n, a, c.w)
		}
	}
}
