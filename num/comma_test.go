package num

import (
	"math"
	"testing"
)

func TestCommas(t *testing.T) {
	testList{
		{"0", Comma(0), "0"},
		{"10", Comma(10), "10"},
		{"100", Comma(100), "100"},
		{"1,000", Comma(1000), "1,000"},
		{"10,000", Comma(10000), "10,000"},
		{"100,000", Comma(100000), "100,000"},
		{"10,000,000", Comma(10000000), "10,000,000"},
		{"10,100,000", Comma(10100000), "10,100,000"},
		{"10,010,000", Comma(10010000), "10,010,000"},
		{"10,001,000", Comma(10001000), "10,001,000"},
		{"123,456,789", Comma(123456789), "123,456,789"},
		{"maxint", Comma(9.223372e+18), "9,223,372,000,000,000,000"},
		{"math.maxint", Comma(math.MaxInt64), "9,223,372,036,854,775,807"},
		{"math.minint", Comma(math.MinInt64), "-9,223,372,036,854,775,808"},
		{"minint", Comma(-9.223372e+18), "-9,223,372,000,000,000,000"},
		{"-123,456,789", Comma(-123456789), "-123,456,789"},
		{"-10,100,000", Comma(-10100000), "-10,100,000"},
		{"-10,010,000", Comma(-10010000), "-10,010,000"},
		{"-10,001,000", Comma(-10001000), "-10,001,000"},
		{"-10,000,000", Comma(-10000000), "-10,000,000"},
		{"-100,000", Comma(-100000), "-100,000"},
		{"-10,000", Comma(-10000), "-10,000"},
		{"-1,000", Comma(-1000), "-1,000"},
		{"-100", Comma(-100), "-100"},
		{"-10", Comma(-10), "-10"},
	}.validate(t)
}

func TestCommaFloatWithDigits(t *testing.T) {
	testList{
		{"1.23, 0", CommaFloatWithDigits(1.23, 0), "1"},
		{"1.23, 1", CommaFloatWithDigits(1.23, 1), "1.2"},
		{"1.23, 2", CommaFloatWithDigits(1.23, 2), "1.23"},
		{"1.23, 3", CommaFloatWithDigits(1.23, 3), "1.23"},
	}.validate(t)
}

func TestCommaFloats(t *testing.T) {
	testList{
		{"0", CommaFloat(0), "0"},
		{"10.11", CommaFloat(10.11), "10.11"},
		{"100", CommaFloat(100), "100"},
		{"1,000", CommaFloat(1000), "1,000"},
		{"10,000", CommaFloat(10000), "10,000"},
		{"100,000", CommaFloat(100000), "100,000"},
		{"834,142.32", CommaFloat(834142.32), "834,142.32"},
		{"10,000,000", CommaFloat(10000000), "10,000,000"},
		{"10,100,000", CommaFloat(10100000), "10,100,000"},
		{"10,010,000", CommaFloat(10010000), "10,010,000"},
		{"10,001,000", CommaFloat(10001000), "10,001,000"},
		{"123,456,789", CommaFloat(123456789), "123,456,789"},
		{"maxf64", CommaFloat(math.MaxFloat64), "179,769,313,486,231,570,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000"},
		{"minf64", CommaFloat(math.SmallestNonzeroFloat64), "0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005"},
		{"-123,456,789", CommaFloat(-123456789), "-123,456,789"},
		{"-10,100,000", CommaFloat(-10100000), "-10,100,000"},
		{"-10,010,000", CommaFloat(-10010000), "-10,010,000"},
		{"-10,001,000", CommaFloat(-10001000), "-10,001,000"},
		{"-10,000,000", CommaFloat(-10000000), "-10,000,000"},
		{"-100,000", CommaFloat(-100000), "-100,000"},
		{"-10,000", CommaFloat(-10000), "-10,000"},
		{"-1,000", CommaFloat(-1000), "-1,000"},
		{"-100.11", CommaFloat(-100.11), "-100.11"},
		{"-10", CommaFloat(-10), "-10"},
	}.validate(t)
}

func BenchmarkCommas(b *testing.B) {
	for i := 0; i < b.N; i++ {
		Comma(1234567890)
	}
}

func BenchmarkCommaFloat(b *testing.B) {
	for i := 0; i < b.N; i++ {
		CommaFloat(1234567890.83584)
	}
}
